# Default config for sway
#
# Copy this to ~/.config/sway/config and edit it to your liking.
#
# Read `man 5 sway` for a complete reference.


### Includes
# mainly for sway-systemd
include /etc/sway/config.d/10-systemd-cgroups.conf
include /etc/sway/config.d/10-systemd-session.conf
include nord


### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l

set $wallpaper /usr/share/wallpapers/Next/contents/images/2560x1440.png

set $term kitty
set $menu bemenu -iH28 -mall --fn "Fira Code"
set $launcher j4-dmenu-desktop --dmenu='$menu' --term='kitty' | xargs swaymsg exec --


### Output configuration
output "Goldstar Company Ltd LG ULTRAGEAR 104MANJ7FL47" {
        resolution 2560x1440
        position 0,0
        adaptive_sync on
}

output "Samsung Electric Company S24E650 H4ZJ803253" {
        resolution 1920x1080
        position 2560,0
}

output eDP-1 {
        resolution 1920x1080
        position 0,0
}

output "Unknown Index HMD 0x0000FD89" disable

output * bg $wallpaper fill


### Input configuration
input type:keyboard {
        xkb_layout "de"
        xkb_numlock enabled
}

input 1133:49277:Logitech_Gaming_Mouse_G502 {
        accel_profile   "adaptive"
        pointer_accel   -1.0
}

input 1267:12384:ELAN0501:00_04F3:3060_Touchpad {
        natural_scroll  enabled
        tap             enabled
        tap_button_map  lrm
}


### Keybinds
# Move/Resize windows with mouse
floating_modifier $mod normal

# Start terminal
bindsym $mod+Return exec $term
# Close active window
bindsym $mod+Shift+q kill
# Launcher
bindsym $mod+d exec $launcher
# Reload
bindsym $mod+Shift+c reload
# Bye Bye
bindsym $mod+Shift+e exec wlogout
# Manual lock
bindsym $mod+q exec swaylock
# Screenshot
bindsym Print exec screenshot-bash

# Move focus around
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# Ditto, with arrow keys
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move the focused window
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
# Ditto, with arrow keys
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Move the focused WORKSPACE to other output
bindsym $mod+Ctrl+$left move workspace output left
bindsym $mod+Ctrl+$down move workspace output down
bindsym $mod+Ctrl+$up move workspace output up
bindsym $mod+Ctrl+$right move workspace output right
# Ditto, with arrow keys
bindsym $mod+Ctrl+Left move workspace output left
bindsym $mod+Ctrl+Down move workspace output down
bindsym $mod+Ctrl+Up move workspace output up
bindsym $mod+Ctrl+Right move workspace output right

# Switch to workspace
bindsym $mod+1 workspace "1:browse"
bindsym $mod+2 workspace "2:secondary"
bindsym $mod+3 workspace "3:code"
bindsym $mod+4 workspace "4:mail"
bindsym $mod+5 workspace "5:chat"
bindsym $mod+6 workspace "6:6"
bindsym $mod+7 workspace "7:7"
bindsym $mod+8 workspace "8:8"
bindsym $mod+9 workspace "9:9"
bindsym $mod+0 workspace "10:10"

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace "1:browse"
bindsym $mod+Shift+2 move container to workspace "2:secondary"
bindsym $mod+Shift+3 move container to workspace "3:code"
bindsym $mod+Shift+4 move container to workspace "4:mail"
bindsym $mod+Shift+5 move container to workspace "5:chat"
bindsym $mod+Shift+6 move container to workspace "6:6"
bindsym $mod+Shift+7 move container to workspace "7:7"
bindsym $mod+Shift+8 move container to workspace "8:8"
bindsym $mod+Shift+9 move container to workspace "9:9"
bindsym $mod+Shift+0 move container to workspace "10:10"

# Switch the current container between different layout styles
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Make the current focus fullscreen
bindsym $mod+f fullscreen

# Toggle the current focus between tiling and floating mode
bindsym $mod+Shift+space floating toggle

# Swap focus between the tiling area and the floating area
bindsym $mod+space focus mode_toggle

# Move focus to the parent container
bindsym $mod+a focus parent

# Multimedia keys
bindsym XF86AudioStop exec mpc stop
bindsym XF86AudioPlay exec mpc toggle
bindsym XF86AudioNext exec mpc next
bindsym XF86AudioPrev exec mpc prev
# Pulse volume
bindsym XF86AudioRaiseVolume exec pamixer -ui 2 && pamixer --get-volume > $XDG_RUNTIME_DIR/wob.sock
bindsym XF86AudioLowerVolume exec pamixer -ud 2 && pamixer --get-volume > $XDG_RUNTIME_DIR/wob.sock
# MPD volume
bindsym Shift+XF86AudioRaiseVolume exec mpc vol +2 && mpc vol | sed "s/[^0-9]*//g" > $XDG_RUNTIME_DIR/wob.sock
bindsym Shift+XF86AudioLowerVolume exec mpc vol -2 && mpc vol | sed "s/[^0-9]*//g" > $XDG_RUNTIME_DIR/wob.sock
# Brightness
bindsym XF86MonBrightnessDown exec brightnessctl set 5%- | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $XDG_RUNTIME_DIR/wob.sock
bindsym XF86MonBrightnessUp exec brightnessctl set +5% | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $XDG_RUNTIME_DIR/wob.sock
# Resize mode
mode "resize" {

    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    # Ditto, with arrow keys
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"


### Status bar
bar {
        swaybar_command waybar
}


### Look and feel
font pango:Fira Code 10
client.focused          $nord3  $nord3  $nord6  $nord9  $nord0
client.focused_inactive $nord1  $nord1  $nord4  $nord9  $nord0
client.unfocused        $nord0  $nord0  $nord4  $nord9  $nord0
client.urgent           $nord11 $nord11 $nord4  $nord9  $nord0


### Window rules
# Show PulseMixer popup from waybar as floating window
for_window [app_id=popup_pulsemixer] floating enable
for_window [app_id=popup_pulsemixer] resize set 800 600
for_window [app_id=popup_pulsemixer] border none

# LXQt Polkit Agent
for_window [app_id=lxqt-policykit-agent] floating enable

# Kontact to Mail Workspace
assign [app_id=kontact] 4:mail

# Chat apps to Chat Workspace
assign [app_id=telegramdesktop] 5:chat
assign [class=Signal] 5:chat
assign [class=Element] 5:chat
assign [class=discord] 5:chat

# Inhibit
for_window [title=.*] inhibit_idle fullscreen
for_window [class=vrmonitor] inihibit_idle open

### Services
# TODO: Create service for swayidle
exec swayidle \
        timeout 300 'swaylock -f -c 000000' \
        timeout 240 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
        timeout 600 'systemctl suspend' \
        before-sleep 'swaylock -f -c 000000'

